
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../emu_setup/">
      
      
        <link rel="next" href="../how_testing_is_done/">
      
      
      <link rel="icon" href="../assets/keyboard.svg">
      <meta name="generator" content="mkdocs-1.6.0, mkdocs-material-9.5.27">
    
    
      
        <title>Test a new keyboard - Kebbie</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.6543a935.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../css/mkdocstrings.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="amber">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#test-a-new-keyboard" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
          <aside class="md-banner md-banner--warning">
            <div class="md-banner__inner md-grid md-typeset">
              
  You're not viewing the latest stable version.
  <a href="../..">

    <strong>Go to latest stable version.</strong>
  </a>

            </div>
            <script>var el=document.querySelector("[data-md-component=outdated]"),outdated=__md_get("__outdated",sessionStorage);!0===outdated&&el&&(el.hidden=!1)</script>
          </aside>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Kebbie" class="md-header__button md-logo" aria-label="Kebbie" data-md-component="logo">
      
  <img src="../assets/keyboard.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Kebbie
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Test a new keyboard
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="amber"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="teal" data-md-color-accent="amber"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22Z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/FleksySDK/kebbie" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    FleksySDK/kebbie
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Kebbie" class="md-nav__button md-logo" aria-label="Kebbie" data-md-component="logo">
      
  <img src="../assets/keyboard.svg" alt="logo">

    </a>
    Kebbie
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/FleksySDK/kebbie" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    FleksySDK/kebbie
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Welcome
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../usage/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Usage
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../emulated_keyboard/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Emulated keyboards
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../emu_setup/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Emulator setup
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Test a new keyboard
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Test a new keyboard
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#device-setup" class="md-nav__link">
    <span class="md-ellipsis">
      Device setup
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installing-the-keyboard-on-the-device" class="md-nav__link">
    <span class="md-ellipsis">
      Installing the keyboard on the device
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#add-a-new-keyboard-to-kebbie" class="md-nav__link">
    <span class="md-ellipsis">
      Add a new keyboard to Kebbie
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#get-full-keyboard-locators" class="md-nav__link">
    <span class="md-ellipsis">
      Get full keyboard locators
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#get-the-keyboard-layout" class="md-nav__link">
    <span class="md-ellipsis">
      Get the keyboard layout
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#test-the-new-keyboard-with-kebbie" class="md-nav__link">
    <span class="md-ellipsis">
      Test the new keyboard with Kebbie
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../how_testing_is_done/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    How testing is done ?
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../architecture/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Architecture
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../leaderboards/main/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Leaderboard
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9" >
        
          
          <label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Code reference
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9">
            <span class="md-nav__icon md-icon"></span>
            Code reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../public_api/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Public API
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../internals/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Internals
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#device-setup" class="md-nav__link">
    <span class="md-ellipsis">
      Device setup
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installing-the-keyboard-on-the-device" class="md-nav__link">
    <span class="md-ellipsis">
      Installing the keyboard on the device
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#add-a-new-keyboard-to-kebbie" class="md-nav__link">
    <span class="md-ellipsis">
      Add a new keyboard to Kebbie
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#get-full-keyboard-locators" class="md-nav__link">
    <span class="md-ellipsis">
      Get full keyboard locators
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#get-the-keyboard-layout" class="md-nav__link">
    <span class="md-ellipsis">
      Get the keyboard layout
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#test-the-new-keyboard-with-kebbie" class="md-nav__link">
    <span class="md-ellipsis">
      Test the new keyboard with Kebbie
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="test-a-new-keyboard">Test a new keyboard</h1>
<p>To be able to test a keyboard not supported yet by Kebbie you will need to do some steps before run the tests.</p>
<h2 id="device-setup">Device setup</h2>
<p>To get the elements of the keyboard to be able to map the keys and then evaluate the keyboard you need to have Appium 2 correctly installed and the emulator ready. </p>
<p>So you need to:</p>
<ul>
<li>Setup Appium by following the <a href="../emu_setup/#installing-appium-20">emulator setup</a> documentation.</li>
<li>Setup the emulator by following the <a href="../emu_setup/#setting-up-android-emulator">emulator setup</a> documentation.</li>
</ul>
<h2 id="installing-the-keyboard-on-the-device">Installing the keyboard on the device</h2>
<p>First of all install the APK manually if you have the file locally or download it from the app the store:</p>
<p><img alt="" src="../assets/swiftkey_setup_1.png" width="300" /></p>
<p>Once it's installed, if it hasn't any setup wizard, access to the on-screen keyboard settings to enable and select it.</p>
<p>Example for Android:</p>
<p><img alt="" src="../assets/keyboard_setup_android.png" width="300" /></p>
<p>Example for iOS:</p>
<p><img alt="" src="../assets/keyboard_setup_ios_1.png" width="300" /></p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>On iOS keyboards you will need to allow the full access permission.</p>
<p><img alt="" src="../assets/keyboard_setup_ios_2.png" width="300" /></p>
</div>
<h2 id="add-a-new-keyboard-to-kebbie">Add a new keyboard to Kebbie</h2>
<p>Add the name of the new keyboard in the available choices in the <a href="../internals/#cmdpy">cmd.py</a> file.</p>
<p>Example:</p>
<div class="highlight"><pre><span></span><code><span class="nv">choices</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span><span class="s2">&quot;newKeyboard&quot;</span>,<span class="w"> </span><span class="s2">&quot;gboard&quot;</span>,<span class="w"> </span><span class="s2">&quot;tappa&quot;</span>,<span class="w"> </span><span class="s2">&quot;ios&quot;</span>,<span class="w"> </span><span class="s2">&quot;kbkitpro&quot;</span>,<span class="w"> </span><span class="s2">&quot;fleksy&quot;</span><span class="o">]</span>
</code></pre></div>
<p>Add it in the file <a href="../internals/#emulatorpy">emulator.py</a> file.</p>
<p>Example:</p>
<div class="highlight"><pre><span></span><code><span class="nv">NEWKEYBOARD</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;newkeyboard&quot;</span>
</code></pre></div>
<p>And in the <a href="../internals/#instantiate_correctors">instantiate_correctors</a> list in the <a href="../internals/#cmdpy">cmd.py</a> file if it's an Android keyboard.</p>
<p>Then add it the <code>KEYBOARD_PACKAGE</code> list in the <a href="../internals/#emulatorpy">emulator.py</a> file to automatically select it before the keys mapping or the keyboard evaluation and to filter the page source if you want to map the keys.</p>
<div class="admonition success">
<p class="admonition-title">Tip</p>
<p>To get the package of the new keyboard, once it's installed on the device, just run the command <code>adb shell pm list packages -3 | cut -f 2 -d ":"</code> and search it in the list.</p>
</div>
<h2 id="get-full-keyboard-locators">Get full keyboard locators</h2>
<p>Run the command <code>kebbie get_page_source -K newKeyboard</code> on your code. The device will open a web browser and show the keyboard currently selected. After that, the system will get all the locators on screen and save them in an XML file.</p>
<div class="admonition success">
<p class="admonition-title">Tip</p>
<p>If you have set the keyboard package, you will get the information automatically filtered by the keyboard locators to find the keys and suggestions easier.</p>
</div>
<div class="admonition info">
<p class="admonition-title">Note</p>
<p>You can show that information directly on console just adding the parameter <code>--print_page_source</code> or <code>-P</code> to the <code>get_page_source</code> command.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Important</p>
<p>If there is no keyboard package set, or it is not found in the data gathered, the system will save the whole page source without filtering it.</p>
</div>
<p>Once you have all the locators related with the keyboard, find the root element of the keyboard, the keyboard keys and suggestions elements.</p>
<div class="admonition success">
<p class="admonition-title">Tip</p>
<p>You can usually find the keys by the <code>content-desc</code> or the <code>text</code> of their elements, if not, try to find the <code>resource-id</code> value.</p>
</div>
<div class="admonition success">
<p class="admonition-title">Tip</p>
<p>To find the suggestions easier, type something with the keyboard to show up the suggestions just before get the page source, then you will be able to find the locators by searching the text of those suggestions.</p>
</div>
<h2 id="get-the-keyboard-layout">Get the keyboard layout</h2>
<p>Create a layout detector class with the keyboard name adding the methods to get the root, the keys and the suggestions (see the <code>GboardLayoutDetector</code> class for an example).</p>
<p>Example copying and editing the Gboard layout detector:</p>
<div class="highlight"><pre><span></span><code>class<span class="w"> </span>NewKeyboardLayoutDetector<span class="o">(</span>LayoutDetector<span class="o">)</span>:
<span class="w">    </span><span class="s2">&quot;&quot;&quot;Layout detector for the NewKeyboard keyboard. See `LayoutDetector` for more</span>
<span class="s2">    information.</span>
<span class="s2">    &quot;&quot;&quot;</span>

<span class="w">    </span>def<span class="w"> </span>__init__<span class="o">(</span>self,<span class="w"> </span>*args,<span class="w"> </span>**kwargs<span class="o">)</span>:
<span class="w">        </span>super<span class="o">()</span>.__init__<span class="o">(</span>
<span class="w">            </span>*args,
<span class="w">            </span><span class="nv">xpath_root</span><span class="o">=</span>f<span class="s2">&quot;./*/*[@package=&#39;{KEYBOARD_PACKAGE[NEWKEYBOARD]}&#39;]&quot;</span>,
<span class="w">            </span><span class="nv">xpath_keys</span><span class="o">=</span><span class="s2">&quot;.//*[@resource-id][@content-desc]&quot;</span>,
<span class="w">            </span>**kwargs,
<span class="w">        </span><span class="o">)</span>

<span class="w">    </span>def<span class="w"> </span>get_suggestions<span class="o">(</span>self<span class="o">)</span><span class="w"> </span>-&gt;<span class="w"> </span>List<span class="o">[</span>str<span class="o">]</span>:
<span class="w">        </span><span class="s2">&quot;&quot;&quot;Method to retrieve the keyboard suggestions from the XML tree.</span>

<span class="s2">        Returns:</span>
<span class="s2">            List of suggestions from the keyboard.</span>
<span class="s2">        &quot;&quot;&quot;</span>
<span class="w">        </span><span class="nv">suggestions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[]</span>

<span class="w">        </span><span class="nv">sections</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span>
<span class="w">            </span>data
<span class="w">            </span><span class="k">for</span><span class="w"> </span>data<span class="w"> </span><span class="k">in</span><span class="w"> </span>self.driver.page_source.split<span class="o">(</span><span class="s2">&quot;&lt;android.widget.FrameLayout&quot;</span><span class="o">)</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span>KEYBOARD_PACKAGE<span class="o">[</span>NEWKEYBOARD<span class="o">]</span><span class="w"> </span><span class="k">in</span><span class="w"> </span>data
<span class="w">        </span><span class="o">]</span>
<span class="w">        </span><span class="k">for</span><span class="w"> </span>section<span class="w"> </span><span class="k">in</span><span class="w"> </span>sections:
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="s2">&quot;content-desc&quot;</span><span class="w"> </span><span class="k">in</span><span class="w"> </span>section<span class="w"> </span>and<span class="w"> </span><span class="s2">&quot;resource-id&quot;</span><span class="w"> </span>not<span class="w"> </span><span class="k">in</span><span class="w"> </span>section<span class="w"> </span>and<span class="w"> </span><span class="s1">&#39;long-clickable=&quot;true&quot;&#39;</span><span class="w"> </span><span class="k">in</span><span class="w"> </span>section:
<span class="w">                </span><span class="nv">m</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>re.search<span class="o">(</span>r<span class="s2">&quot;content\-desc=\&quot;([^\&quot;]*)\&quot;&quot;</span>,<span class="w"> </span>section<span class="o">)</span>
<span class="w">                </span><span class="k">if</span><span class="w"> </span>m:
<span class="w">                    </span><span class="nv">content</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>m.group<span class="o">(</span><span class="m">1</span><span class="o">)</span>

<span class="w">                    </span><span class="c1"># Deal with emojis</span>
<span class="w">                    </span><span class="nv">emoji</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>re.match<span class="o">(</span>r<span class="s2">&quot;emoji (&amp;[^;]+;)&quot;</span>,<span class="w"> </span>content<span class="o">)</span>
<span class="w">                    </span>suggestions.append<span class="o">(</span>html.unescape<span class="o">(</span>emoji<span class="o">[</span><span class="m">1</span><span class="o">])</span><span class="w"> </span><span class="k">if</span><span class="w"> </span>emoji<span class="w"> </span><span class="k">else</span><span class="w"> </span>content<span class="o">)</span>

<span class="w">        </span><span class="k">return</span><span class="w"> </span>suggestions
</code></pre></div>
<div class="admonition warning">
<p class="admonition-title">Important</p>
<p>If there is any content in the keyboard that you want to ignore from the mapping, add it in the <code>CONTENT_TO_IGNORE</code> dictionary in the <a href="https://github.com/FleksySDK/kebbie/blob/main/kebbie/emulator.py"><code>kebbie/emulator.py</code></a> file (e.g. <code>"Gallery"</code>).</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Important</p>
<p>If there is any content in the keyboard that you want to map with another name, add it in the <code>CONTENT_TO_RENAME</code> dictionary in the <a href="https://github.com/FleksySDK/kebbie/blob/main/kebbie/emulator.py"><code>kebbie/emulator.py</code></a> file (e.g. <code>"Find": "enter"</code>).</p>
</div>
<p>Finally, in the <code>__init__</code> method in the <a href="https://github.com/FleksySDK/kebbie/blob/main/kebbie/emulator.py"><code>kebbie/emulator.py</code></a> file, add the name of the keyboard in the <code>Get the the right layout</code> section to run its layout detector and add the keyboard to the error handling.</p>
<p>Example:</p>
<div class="highlight"><pre><span></span><code><span class="k">elif</span><span class="w"> </span>self.keyboard<span class="w"> </span><span class="o">==</span><span class="w"> </span>NEWKEYBOARD:
<span class="w">    </span>self.detected<span class="w"> </span><span class="o">=</span><span class="w"> </span>NewKeyboardLayoutDetector<span class="o">(</span>self.driver,<span class="w"> </span>self._tap<span class="o">)</span>
<span class="w">    </span>self.layout<span class="w"> </span><span class="o">=</span><span class="w"> </span>self.detected.layout
<span class="k">else</span>:
<span class="w">    </span>raise<span class="w"> </span>ValueError<span class="o">(</span>
<span class="w">        </span>f<span class="s2">&quot;Unknown keyboard : {self.keyboard}. Please specify {NEWKEYBOARD}, {GBOARD}, {TAPPA}, &quot;</span>
<span class="w">        </span>f<span class="s2">&quot;{FLEKSY}, {KBKITPRO}, {KBKITOSS} or {IOS}.&quot;</span>
<span class="w">    </span><span class="o">)</span>
</code></pre></div>
<h2 id="test-the-new-keyboard-with-kebbie">Test the new keyboard with Kebbie</h2>
<p>First check the key mapping running the command <code>kebbie show_layout -K newkkeyboard</code>.</p>
<div class="admonition success">
<p class="admonition-title">Tip</p>
<p>If the keys mapping fails trying to get the numbers layout, add a <code>print(self.driver.page_source)</code> before the method <code>self.tap(layout["lowercase"]["numbers"]</code> and launch the command again to get the key to switch to numbers adding it in the <code>CONTENT_TO_RENAME</code> list (e.g. <code>"Digit keyboard": "numbers"</code>).</p>
</div>
<p>Finally, evaluate the keyboard with the command <code>kebbie evaluate -K newkeyboard</code> and wait until the evaluation is finished to get the results.</p>
<div class="admonition info">
<p class="admonition-title">Note</p>
<p>See <a href="../how_testing_is_done/">"How testing is done?"</a> to know the internal process performed.</p>
</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.sections", "content.code.copy"], "search": "../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../assets/javascripts/bundle.ad660dcc.min.js"></script>
      
    
  </body>
</html>